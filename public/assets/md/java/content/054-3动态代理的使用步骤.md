## **ğŸ› ï¸ 3ã€åŠ¨æ€ä»£ç†çš„ä½¿ç”¨æ­¥éª¤**

### âœ… æ­¥éª¤ 1ï¼šå®šä¹‰æ¥å£ï¼ˆå¿…é¡»ï¼‰

```java
public interface UserService {
    void addUser();
    void deleteUser();
}
```

> âš ï¸ æ³¨æ„ï¼šJava åŠ¨æ€ä»£ç†åªèƒ½å¯¹æ¥å£è¿›è¡Œä»£ç†ï¼

---

### âœ… æ­¥éª¤ 2ï¼šå®ç°æ¥å£ç±»ï¼ˆçœŸå®å¯¹è±¡ï¼‰

```java
public class UserServiceImpl implements UserService {
    @Override
    public void addUser() {
        System.out.println("æ·»åŠ ç”¨æˆ·");
    }

    @Override
    public void deleteUser() {
        System.out.println("åˆ é™¤ç”¨æˆ·");
    }
}
```

---

### âœ… æ­¥éª¤ 3ï¼šå®ç° InvocationHandler æ¥å£ï¼ˆå®šä¹‰ä»£ç†é€»è¾‘ï¼‰

```java
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;

public class MyInvocationHandler implements InvocationHandler {

    private Object target; // è¢«ä»£ç†çš„å¯¹è±¡

    public MyInvocationHandler(Object target) {
        this.target = target;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println("ã€å‰ç½®å¢å¼ºã€‘æ–¹æ³•æ‰§è¡Œå‰ï¼š" + method.getName());

        // æ‰§è¡ŒçœŸå®å¯¹è±¡çš„æ–¹æ³•
        Object result = method.invoke(target, args);

        System.out.println("ã€åç½®å¢å¼ºã€‘æ–¹æ³•æ‰§è¡Œåï¼š" + method.getName());
        return result;
    }
}
```

---

### âœ… æ­¥éª¤ 4ï¼šç”Ÿæˆä»£ç†å¯¹è±¡å¹¶è°ƒç”¨

```java
import java.lang.reflect.Proxy;

public class TestProxy {
    public static void main(String[] args) {
        // åˆ›å»ºçœŸå®å¯¹è±¡
        UserService userService = new UserServiceImpl();

        // åˆ›å»ºä»£ç†å¤„ç†å™¨
        MyInvocationHandler handler = new MyInvocationHandler(userService);

        // ç”Ÿæˆä»£ç†å¯¹è±¡
        UserService proxy = (UserService) Proxy.newProxyInstance(
                userService.getClass().getClassLoader(),   // ç±»åŠ è½½å™¨
                userService.getClass().getInterfaces(),   // è¢«ä»£ç†å¯¹è±¡å®ç°çš„æ¥å£
                handler                                   // ä»£ç†é€»è¾‘å¤„ç†å™¨
        );

        // è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•
        proxy.addUser();
        proxy.deleteUser();
    }
}
```

---