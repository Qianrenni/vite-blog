## 1.2 环境搭建

### Go安装和配置

**Windows安装**
1. 下载安装包：https://golang.org/dl/
2. 运行安装程序
3. 验证安装：
```cmd
go version
go env
```

**macOS安装**
```bash
# 使用Homebrew
brew install go

# 或者下载安装包
# 验证安装
go version
```

**Linux安装**
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install golang-go

# CentOS/RHEL
sudo yum install golang

# 或者下载二进制包
wget https://golang.org/dl/go1.21.0.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.0.linux-amd64.tar.gz
```

**环境变量配置**
```bash
# 添加到 ~/.bashrc 或 ~/.zshrc
export GOROOT=/usr/local/go
export GOPATH=$HOME/go
export PATH=$PATH:$GOROOT/bin:$GOPATH/bin
```

### GOPATH和GOROOT理解

**GOROOT**
- Go安装目录
- 包含编译器、工具和标准库
- 通常为 `/usr/local/go` 或 `C:\Go`

**GOPATH**
- Go工作空间目录
- 包含源代码、包和可执行文件
- Go 1.11后可选，推荐使用Go Modules

**目录结构**
```
GOPATH/
├── src/          # 源代码
│   └── github.com/
│       └── username/
│           └── project/
├── pkg/          # 编译后的包
└── bin/          # 可执行文件
```

### Go Modules详解

**启用Go Modules**
```bash
# Go 1.11+
export GO111MODULE=on

# Go 1.13+ 默认启用
```

**基本命令**
```bash
# 初始化模块
go mod init github.com/username/project

# 添加依赖
go get github.com/gin-gonic/gin

# 整理依赖
go mod tidy

# 查看依赖
go mod graph

# 下载依赖
go mod download
```

**go.mod文件示例**
```go
module github.com/username/project

go 1.21

require (
    github.com/gin-gonic/gin v1.9.1
    github.com/go-sql-driver/mysql v1.7.1
)

require (
    github.com/gin-contrib/sse v0.1.0 // indirect
    github.com/go-playground/locales v0.14.1 // indirect
)
```

### IDE/编辑器选择

**VS Code**
```json
// 推荐插件
{
    "recommendations": [
        "golang.go",
        "ms-vscode.go-debug-adapter"
    ]
}
```

**GoLand**
- JetBrains专业Go IDE
- 强大的调试功能
- 智能代码补全

**Vim/Neovim**
```vim
" 推荐插件
Plug 'fatih/vim-go'
Plug 'neoclide/coc.nvim'
```

**配置建议**
```json
// VS Code settings.json
{
    "go.toolsManagement.autoUpdate": true,
    "go.formatTool": "goimports",
    "go.lintTool": "golangci-lint"
}
```

### 开发环境配置

**工作目录设置**
```bash
mkdir -p ~/go/{bin,src,pkg}
cd ~/go/src
mkdir myproject
cd myproject
```

**Git配置**
```bash
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

**代码检查工具**
```bash
# 安装golangci-lint
curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin v1.54.2
```

### 第一个Go程序

**Hello World示例**
```go
// main.go
package main

import "fmt"

func main() {
    fmt.Println("Hello, World!")
}
```

**运行程序**
```bash
# 方式1：直接运行
go run main.go

# 方式2：编译后运行
go build main.go
./main

# 方式3：安装到GOPATH/bin
go install
```

**项目结构**
```
myproject/
├── go.mod
├── main.go
├── README.md
└── docs/
```

### 调试环境搭建

**Delve调试器**
```bash
# 安装Delve
go install github.com/go-delve/delve/cmd/dlv@latest

# 调试程序
dlv debug main.go
```

**VS Code调试配置**
```json
// .vscode/launch.json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Launch",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "program": "${workspaceFolder}",
            "env": {},
            "args": []
        }
    ]
}
```

**调试命令**
```bash
# 设置断点
dlv debug
(dlv) break main.main
(dlv) continue
(dlv) print variableName
(dlv) step
(dlv) next
```