## 2.2 数据类型系统

### 基本数据类型（原始类型）

```javascript
// Number 类型
let num1 = 42;           // 整数
let num2 = 3.14;         // 浮点数
let num3 = 0xFF;         // 十六进制: 255
let num4 = 0b1010;       // 二进制: 10
let num5 = 0o755;        // 八进制: 493
let nan = NaN;           // 非数字
let infinity = Infinity; // 无穷大
let negativeInfinity = -Infinity; // 负无穷大

// String 类型
let str1 = "双引号字符串";
let str2 = '单引号字符串';
let str3 = `模板字符串`;
let str4 = "包含\"引号\"的字符串";
let str5 = `多行
字符串`;

// Boolean 类型
let bool1 = true;
let bool2 = false;

// falsy 值
console.log(Boolean(false));     // false
console.log(Boolean(0));         // false
console.log(Boolean(""));        // false
console.log(Boolean(null));      // false
console.log(Boolean(undefined)); // false
console.log(Boolean(NaN));       // false

// Undefined 类型
let undefinedVar;
console.log(undefinedVar); // undefined
console.log(typeof undefinedVar); // "undefined"

// Null 类型
let nullVar = null;
console.log(typeof nullVar); // "object" (历史遗留问题)

// Symbol 类型
let sym1 = Symbol('description');
let sym2 = Symbol('description');
console.log(sym1 === sym2); // false - 每个 Symbol 都是唯一的

// 对象属性的唯一标识
let obj = {
    [sym1]: "symbol 属性值"
};

// BigInt 类型
let bigInt1 = 123456789012345678901234567890n;
let bigInt2 = BigInt("123456789012345678901234567890");
```

### 引用数据类型

```javascript
// Object 类型
let person = {
    name: "张三",
    age: 25,
    hobbies: ["读书", "游泳"],
    address: {
        city: "北京",
        street: "长安街"
    }
};

// 动态添加属性
person.job = "程序员";
person["salary"] = 10000;

// Array 类型
let arr1 = [1, 2, 3];
let arr2 = new Array(1, 2, 3);
let arr3 = Array.of(1, 2, 3);
let arr4 = Array.from("hello"); // ['h', 'e', 'l', 'l', 'o']

// Function 类型
function normalFunction(a, b) {
    return a + b;
}

let arrowFunction = (a, b) => a + b;

let anonymousFunction = function(a, b) {
    return a + b;
};

// Date 类型
let now = new Date();
let specificDate = new Date("2023-01-01");
let timestampDate = new Date(1672531200000);

// RegExp 类型
let regex1 = /pattern/flags;
let regex2 = new RegExp("pattern", "flags");
let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
```

### 类型检测方法和区别

```javascript
// typeof 操作符
console.log(typeof 42);              // "number"
console.log(typeof "hello");         // "string"
console.log(typeof true);            // "boolean"
console.log(typeof undefined);       // "undefined"
console.log(typeof null);            // "object" (历史遗留问题)
console.log(typeof {});              // "object"
console.log(typeof []);              // "object"
console.log(typeof function(){});    // "function"
console.log(typeof Symbol());        // "symbol"
console.log(typeof BigInt(123));     // "bigint"

// instanceof 操作符
let arr = [1, 2, 3];
let obj = { name: "张三" };
let date = new Date();

console.log(arr instanceof Array);   // true
console.log(obj instanceof Object);  // true
console.log(date instanceof Date);   // true
console.log(arr instanceof Object);  // true (Array 继承自 Object)

// constructor 属性
console.log([].constructor === Array);           // true
console.log({}.constructor === Object);          // true
console.log(new Date().constructor === Date);    // true

// Object.prototype.toString.call() - 最准确的方法
console.log(Object.prototype.toString.call([]));           // "[object Array]"
console.log(Object.prototype.toString.call({}));           // "[object Object]"
console.log(Object.prototype.toString.call(null));         // "[object Null]"
console.log(Object.prototype.toString.call(undefined));    // "[object Undefined]"
console.log(Object.prototype.toString.call(function(){})); // "[object Function]"

// Array.isArray()
console.log(Array.isArray([]));      // true
console.log(Array.isArray({}));      // false
console.log(Array.isArray("array")); // false
```

### 类型转换规则和隐式转换

```javascript
// 显式类型转换
let num = Number("123");        // 123
let str = String(123);          // "123"
let bool = Boolean(123);        // true

let int = parseInt("123.45");   // 123
let float = parseFloat("123.45"); // 123.45

// 隐式类型转换场景
// 算术运算中的转换
console.log("5" - 3);           // 2 (字符串转数字)
console.log("5" + 3);           // "53" (数字转字符串)
console.log(true + 1);          // 2 (布尔转数字)
console.log(null + 5);          // 5 (null转数字)

// 比较运算中的转换
console.log("10" == 10);        // true (字符串转数字)
console.log(true == 1);         // true (布尔转数字)
console.log(null == undefined); // true (特殊规则)
console.log("" == 0);           // true (空字符串转数字)

// 布尔运算中的转换
if ("hello") { /* 执行 */ }     // 非空字符串为 true
if (0) { /* 不执行 */ }         // 0 为 false
if ({}) { /* 执行 */ }          // 对象为 true

// 字符串拼接中的转换
console.log("结果: " + 42);     // "结果: 42"
console.log(1 + 2 + "3");       // "33" (左到右计算)
console.log("1" + 2 + 3);       // "123" (左到右计算)

// 特殊情况
console.log(NaN == NaN);        // false
console.log(NaN === NaN);       // false
console.log(Object.is(NaN, NaN)); // true

console.log(0 == -0);           // true
console.log(0 === -0);          // true
console.log(Object.is(0, -0));  // false

console.log(null == undefined); // true
console.log(null === undefined); // false
console.log(Object.is(null, undefined)); // false
```