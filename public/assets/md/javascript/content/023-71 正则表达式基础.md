## 7.1 æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€

### 1. æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å’Œæ¨¡å¼

```javascript
// æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬è¯­æ³•
// å­—é¢é‡å½¢å¼
const regex1 = /pattern/flags;
const regex2 = /hello/i; // ä¸åŒºåˆ†å¤§å°å†™

// æ„é€ å‡½æ•°å½¢å¼
const regex3 = new RegExp('pattern', 'flags');
const regex4 = new RegExp('hello', 'i');

// åŸºæœ¬å­—ç¬¦åŒ¹é…
const text = 'Hello World';
console.log(/Hello/.test(text)); // true
console.log(/hello/.test(text)); // false (åŒºåˆ†å¤§å°å†™)
console.log(/hello/i.test(text)); // true (ä¸åŒºåˆ†å¤§å°å†™)

// ç‰¹æ®Šå­—ç¬¦
// . åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å­—ç¬¦
console.log(/h.llo/.test('hello')); // true
console.log(/h.llo/.test('hallo')); // true
console.log(/h.llo/.test('h\nllo')); // false

// ^ åŒ¹é…è¡Œé¦–
console.log(/^Hello/.test('Hello World')); // true
console.log(/^World/.test('Hello World')); // false

// $ åŒ¹é…è¡Œå°¾
console.log(/World$/.test('Hello World')); // true
console.log(/Hello$/.test('Hello World')); // false

// \b åŒ¹é…å•è¯è¾¹ç•Œ
console.log(/\bWorld\b/.test('Hello World')); // true
console.log(/\bWorld\b/.test('Hello Worldwide')); // false

// \B åŒ¹é…éå•è¯è¾¹ç•Œ
console.log(/\Borld\B/.test('Worldwide')); // true

// è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦
const specialChars = /\.\^\$\*\+\?\(\)\[\]\{\}\|\\/;
console.log(specialChars.test('.^$*+?()[]{}|\\')); // true
```

### 2. å­—é¢é‡å’Œæ„é€ å‡½æ•°åˆ›å»ºæ–¹å¼

```javascript
// å­—é¢é‡å½¢å¼ - ç¼–è¯‘æ—¶ç¡®å®š
const literalRegex = /hello \d+/i;
console.log(literalRegex.test('Hello 123')); // true

// æ„é€ å‡½æ•°å½¢å¼ - è¿è¡Œæ—¶ç¡®å®š
const pattern = 'hello \\d+';
const constructorRegex = new RegExp(pattern, 'i');
console.log(constructorRegex.test('Hello 123')); // true

// åŠ¨æ€åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼
function createEmailRegex(domains) {
    const domainPattern = domains.join('|');
    return new RegExp(`^[\\w.-]+@(${domainPattern})$`, 'i');
}

const emailRegex = createEmailRegex(['gmail.com', 'yahoo.com', 'outlook.com']);
console.log(emailRegex.test('user@gmail.com')); // true
console.log(emailRegex.test('user@hotmail.com')); // false

// è½¬ä¹‰æ³¨æ„äº‹é¡¹
// å­—é¢é‡ä¸­çš„åæ–œæ éœ€è¦åŒé‡è½¬ä¹‰
const literalPattern = /\d+\.\d+/; // åŒ¹é…æ•°å­—.æ•°å­—

// æ„é€ å‡½æ•°ä¸­çš„åæ–œæ éœ€è¦å››é‡è½¬ä¹‰
const constructorPattern = new RegExp('\\d+\\.\\d+');

// å®é™…åº”ç”¨ï¼šåŠ¨æ€éªŒè¯è§„åˆ™
function createValidator(pattern, flags = '') {
    if (typeof pattern === 'string') {
        return new RegExp(pattern, flags);
    }
    return pattern;
}

const phoneValidator = createValidator('^\\d{3}-\\d{3}-\\d{4}$');
const emailValidator = createValidator('^[\\w.-]+@[\\w.-]+\\.[\\w]+$');

console.log(phoneValidator.test('123-456-7890')); // true
console.log(emailValidator.test('user@example.com')); // true
```

### 3. æ ‡å¿—ä½çš„å«ä¹‰å’Œä½œç”¨

```javascript
// æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—ä½

// i - ä¸åŒºåˆ†å¤§å°å†™ (ignore case)
const caseInsensitive = /hello/i;
console.log(caseInsensitive.test('Hello')); // true
console.log(caseInsensitive.test('HELLO')); // true
console.log(caseInsensitive.test('HeLLo')); // true

// g - å…¨å±€åŒ¹é… (global)
const globalRegex = /hello/g;
const text = 'Hello hello HELLO';
console.log(text.match(globalRegex)); // ['hello'] (ä¸åŒºåˆ†å¤§å°å†™çš„æƒ…å†µä¸‹)
const caseSensitiveGlobal = /hello/g;
console.log(text.match(caseSensitiveGlobal)); // ['hello'] (åªåŒ¹é…ç¬¬ä¸€ä¸ª)

// m - å¤šè¡Œæ¨¡å¼ (multiline)
const multilineText = `Line 1
Line 2
Line 3`;

const withoutM = /^Line/g;
console.log(multilineText.match(withoutM)); // ['Line'] - åªåŒ¹é…ç¬¬ä¸€è¡Œ

const withM = /^Line/mg;
console.log(multilineText.match(withM)); // ['Line', 'Line', 'Line'] - åŒ¹é…æ¯è¡Œå¼€å¤´

// s - dotAll æ¨¡å¼ (ES2018) - è®© . åŒ¹é…æ¢è¡Œç¬¦
const dotAllRegex = /hello.world/s;
const textWithNewline = 'hello\nworld';
console.log(dotAllRegex.test(textWithNewline)); // true (with s flag)
console.log(/hello.world/.test(textWithNewline)); // false (without s flag)

// u - Unicode æ¨¡å¼
const unicodeRegex = /\u{1F600}/u; // åŒ¹é…ç¬‘è„¸è¡¨æƒ…ç¬¦å·
console.log(unicodeRegex.test('ğŸ˜€')); // true

// y - ç²˜æ€§åŒ¹é… (sticky)
const stickyRegex = /hello/y;
const text2 = 'hello world hello';
console.log(stickyRegex.test(text2)); // true
stickyRegex.lastIndex = 6; // è®¾ç½®åŒ¹é…ä½ç½®
console.log(stickyRegex.test(text2)); // false (ä½ç½®6ä¸æ˜¯'hello')

// æ ‡å¿—ä½ç»„åˆä½¿ç”¨
const complexRegex = /hello world/gim;
// g - å…¨å±€åŒ¹é…
// i - ä¸åŒºåˆ†å¤§å°å†™  
// m - å¤šè¡Œæ¨¡å¼

// æ£€æŸ¥å’Œä¿®æ”¹æ ‡å¿—ä½
const regex = /hello/gi;
console.log(regex.flags); // 'gi'
console.log(regex.global); // true
console.log(regex.ignoreCase); // true
console.log(regex.multiline); // false

// æ³¨æ„ï¼šæ ‡å¿—ä½åœ¨åˆ›å»ºåä¸èƒ½ä¿®æ”¹
// regex.global = false; // æ— æ•ˆ
```

### 4. å­—ç¬¦ç±»å’Œé‡è¯ä½¿ç”¨

```javascript
// å­—ç¬¦ç±» (Character Classes)

// [abc] - åŒ¹é…æ–¹æ‹¬å·å†…ä»»æ„å­—ç¬¦
const vowelRegex = /[aeiou]/g;
const text = 'hello world';
console.log(text.match(vowelRegex)); // ['e', 'o', 'o']

// [a-z] - åŒ¹é…èŒƒå›´å†…çš„å­—ç¬¦
const lowercaseRegex = /[a-z]/g;
console.log('Hello123'.match(lowercaseRegex)); // ['e', 'l', 'l', 'o']

// [^abc] - åŒ¹é…é™¤äº†æ–¹æ‹¬å·å†…å­—ç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦
const nonVowelRegex = /[^aeiou\s]/g; // éå…ƒéŸ³å­—æ¯ä¸”éç©ºç™½å­—ç¬¦
console.log('hello world'.match(nonVowelRegex)); // ['h', 'l', 'l', 'w', 'r', 'l', 'd']

// é¢„å®šä¹‰å­—ç¬¦ç±»
console.log(/\d/.test('123')); // true - æ•°å­— [0-9]
console.log(/\D/.test('abc')); // true - éæ•°å­— [^0-9]
console.log(/\w/.test('a1_')); // true - å•è¯å­—ç¬¦ [a-zA-Z0-9_]
console.log(/\W/.test(' @')); // true - éå•è¯å­—ç¬¦ [^a-zA-Z0-9_]
console.log(/\s/.test(' \t\n')); // true - ç©ºç™½å­—ç¬¦
console.log(/\S/.test('abc')); // true - éç©ºç™½å­—ç¬¦

// é‡è¯ (Quantifiers)

// * - åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡
const zeroOrMore = /go*l/; // g + 0ä¸ªæˆ–å¤šä¸ªo + l
console.log(zeroOrMore.test('gl')); // true
console.log(zeroOrMore.test('gol')); // true
console.log(zeroOrMore.test('gooool')); // true

// + - åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡
const oneOrMore = /go+l/; // g + 1ä¸ªæˆ–å¤šä¸ªo + l
console.log(oneOrMore.test('gl')); // false
console.log(oneOrMore.test('gol')); // true
console.log(oneOrMore.test('gooool')); // true

// ? - åŒ¹é…0æ¬¡æˆ–1æ¬¡
const zeroOrOne = /go?l/; // g + 0ä¸ªæˆ–1ä¸ªo + l
console.log(zeroOrOne.test('gl')); // true
console.log(zeroOrOne.test('gol')); // true
console.log(zeroOrOne.test('gooool')); // false

// {n} - åŒ¹é…æ°å¥½næ¬¡
const exactlyThree = /a{3}/; // æ°å¥½3ä¸ªa
console.log(exactlyThree.test('aa')); // false
console.log(exactlyThree.test('aaa')); // true
console.log(exactlyThree.test('aaaa')); // true (åŒ¹é…å‰3ä¸ª)

// {n,} - åŒ¹é…è‡³å°‘næ¬¡
const atLeastTwo = /a{2,}/; // è‡³å°‘2ä¸ªa
console.log(atLeastTwo.test('a')); // false
console.log(atLeastTwo.test('aa')); // true
console.log(atLeastTwo.test('aaaaa')); // true

// {n,m} - åŒ¹é…nåˆ°mæ¬¡
const twoToFour = /a{2,4}/; // 2åˆ°4ä¸ªa
console.log(twoToFour.test('a')); // false
console.log(twoToFour.test('aa')); // true
console.log(twoToFour.test('aaaaa')); // true (åŒ¹é…å‰4ä¸ª)

// è´ªå©ªä¸éè´ªå©ªåŒ¹é…
const text2 = '<div>Hello</div><div>World</div>';

// è´ªå©ªåŒ¹é… (é»˜è®¤) - åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦
const greedy = /<div>.*<\/div>/;
console.log(text2.match(greedy)[0]); // '<div>Hello</div><div>World</div>'

// éè´ªå©ªåŒ¹é… - åŒ¹é…å°½å¯èƒ½å°‘çš„å­—ç¬¦
const nonGreedy = /<div>.*?<\/div>/g;
console.log(text2.match(nonGreedy)); // ['<div>Hello</div>', '<div>World</div>']

// åˆ†ç»„å’Œæ•è·
const dateRegex = /(\d{4})-(\d{2})-(\d{2})/;
const date = '2023-12-25';
const match = date.match(dateRegex);
console.log(match); // ['2023-12-25', '2023', '12', '25']
console.log(match[1]); // '2023' (å¹´)
console.log(match[2]); // '12' (æœˆ)
console.log(match[3]); // '25' (æ—¥)

// éæ•è·åˆ†ç»„
const nonCapturing = /(?:https?):\/\/(\w+)/;
const url = 'https://example.com';
const urlMatch = url.match(nonCapturing);
console.log(urlMatch); // ['https://example', 'example'] (æ²¡æœ‰æ•è·åè®®éƒ¨åˆ†)

// å‘½åæ•è·ç»„ (ES2018)
const namedGroups = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const namedMatch = '2023-12-25'.match(namedGroups);
console.log(namedMatch.groups.year); // '2023'
console.log(namedMatch.groups.month); // '12'
console.log(namedMatch.groups.day); // '25'
```