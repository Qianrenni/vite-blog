## **1. 内存布局**

C 程序的内存可以划分为以下几个区域，每个区域有不同的用途和特性：

### **1.1 栈（Stack）**

- **特点**：
  - 用于存储函数调用时的局部变量、函数参数和返回地址。
  - 内存分配和释放由编译器自动管理。
  - 分配速度快，但容量有限。
  - 遵循“后进先出”（LIFO）原则。
- **示例**：

  ```c
  void func() {
      int x = 10;  // 局部变量存储在栈上
  }
  ```

  - 当 `func` 被调用时，`x` 在栈上分配；当 `func` 返回时，`x` 自动释放。

---

### **1.2 堆（Heap）**

- **特点**：
  - 用于动态内存分配（如 `malloc`, `calloc`, `realloc`）。
  - 内存分配和释放需要程序员手动管理。
  - 容量较大，但分配速度较慢。
  - 动态分配的内存如果不释放会导致内存泄漏。
- **示例**：

  ```c
  int *arr = (int *)malloc(5 * sizeof(int));  // 动态分配内存
  free(arr);  // 手动释放内存
  ```

---

### **1.3 全局/静态区**

- **特点**：
  - 存储全局变量和静态变量。
  - 内存在程序启动时分配，在程序结束时释放。
  - 生命周期贯穿整个程序运行期间。
- **示例**：

  ```c
  int global_var = 42;  // 全局变量
  static int static_var = 10;  // 静态变量
  ```

---

### **1.4 常量区**

- **特点**：
  - 存储常量数据（如字符串字面量、`const` 变量）。
  - 内容不可修改。
  - 生命周期贯穿整个程序运行期间。
- **示例**：

  ```c
  const char *str = "Hello";  // 字符串 "Hello" 存储在常量区
  ```

---